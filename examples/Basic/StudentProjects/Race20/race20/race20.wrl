#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xsl
# http://www.web3D.org/TaskGroups/x3d/translation/X3dToVrml97.xsl

# [X3D] VRML V3.0 utf8

# [head]
# [meta] filename: race20.wrl
# [meta] description: Contains definitions for track types and movement controls
# [meta] author: Charles Adams
# [meta] translator:
# [meta] created: August 10, 2002
# [meta] revised: August 23, 2002
# [meta] version: 2.0
# [meta] reference: 
# [meta] reference: 
# [meta] copyright: Copyright (c) c h a productions 2002
# [meta] drawing: 
# [meta] image: 
# [meta] movie: 
# [meta] photo: 
# [meta] keywords: tracks, controls
# [meta] warning: Use Cortona plugin ONLY to view
# [meta] url: http://home.attbi.com/~cnadams/race20/race20.wrl
# [meta] generator: 
# Additional authoring resources for meta-tags: http://www.w3.org/TR/html4/struct/global.html#h-7.4.4 http://dublincore.org/documents/dces http://vancouver-webpages.com/META http://vancouver-webpages.com/META/about-mk-metas2.html http://www.statelib.wa.gov:80/info_rscrs/dbs_tools/find-it/metadesc.htm Additional authoring resources for language codes: ftp://ftp.isi.edu/in-notes/bcp/bcp47.txt [IETF RFC3066/BCP47] http://www.loc.gov/standards/iso639-2/langhome.html http://www.iana.org/numbers.html#L Additional authoring resources for country names: http://www.din.de/gremien/nas/nabd/iso3166ma

# [Scene]

NavigationInfo {
  type [ "NONE" ]
}

EXTERNPROTO Tires [exposedField SFRotation setTireRotation, exposedField SFRotation setWheelSpin] "Tires.wrl#Tires"
EXTERNPROTO Carbody [exposedField MFString cartexture] "Carbody.wrl#Carbody"

DEF tracks Group{}

# Specifies Viewpoint and transforms to interact properly with movement controls.
Group {
children [
	Transform {
	translation 0 .5 .2
	children [
		DEF UserView Transform {
		children [
			DEF UserRot Transform {
			children [
				DEF tires Tires{}
				DEF carbody Carbody{}
				DEF cam1 Viewpoint {
				description "view1"
				position 0 .25 1
				orientation 1 0 0 -.2
				}
				DEF cam2 Viewpoint {
				description "view2"
				position 0 1.2 3
				orientation 1 0 0 -.4
				}
				DEF cam3 Viewpoint {
				description "view3"
				position 0 .25 -1
				orientation 1 0 0 -.2
				}
				DEF cam4 Viewpoint {
				description "view4"
				position -1.75 .4 -.85
				orientation .2 1 .2 -1.87
				}
				DEF cam5 Viewpoint {
				description "view5"
				fieldOfView 0.950022
				orientation -0.20329 0.964038 0.171186 1.435949
				position 19.347197 11.810854 0.663059
				}
			]}
		]}
	]}
]}

#DEF AC AudioClip {
#	url "carsound.wav"
#	startTime 0.0
#	stopTime 0.0
#	pitch 1.0
#	loop TRUE
#}

#DEF SN Sound {
#	source USE AC
#	intensity 1.0
#	location 0 0 0
#	direction 1 1 1
#	minFront .1
#	minBack .1
#	maxFront 100
#	maxBack 100
#}

# ground plane
Transform {
translation 10 0 -40
children [
Shape {
	geometry Box {
		size 180 .1 180}
	appearance Appearance{
	material Material {transparency 0}
	texture ImageTexture{url["grass.jpg" "http://home.attbi.com/~cnadams/race/grass.jpg"]}
	}
}]}

# general light, parented through routes to viewpoint. It follows you around.
DEF sceneLight Transform {
children[
	PointLight {
	location 0.0 8.0 4.0
	}
]}

DEF KS KbdSensor {
isActive TRUE
}

DEF clock TimeSensor {
  loop TRUE
}

DEF RaceControl Script {
	url "C:\www.web3d.org\TaskGroups\x3d\translation\my projects\race2.0\RaceControl.class"
	directOutput TRUE
	mustEvaluate TRUE
  field        SFNode   tracks USE tracks
  eventIn      SFTime	timeChange
  eventIn      SFInt32	keyUp
  eventIn      SFInt32	keyDown
  eventOut     SFVec3f	newTranslation
  eventOut     SFRotation	newRotation
  eventOut     SFRotation	newTireRotation
  eventOut     SFRotation	newWheelSpin
  eventOut     SFBool	cam1Out
  eventOut     SFBool	cam2Out
  eventOut     SFBool	cam3Out
  eventOut     SFBool	cam4Out
  eventOut     SFBool	cam5Out
  eventOut     MFString cartex
  eventOut     SFFloat pitch
}

ROUTE UserView.translation_changed TO sceneLight.set_translation 

ROUTE clock.time_changed TO RaceControl.timeChange
ROUTE KS.keyUp TO RaceControl.keyUp
ROUTE KS.keyDown TO RaceControl.keyDown
ROUTE RaceControl.newTranslation TO UserView.set_translation 
#ROUTE RaceControl.newTranslation TO SN set_location
#ROUTE RaceControl.pitch TO AC.set_pitch  
ROUTE RaceControl.newRotation TO UserRot.set_rotation
ROUTE RaceControl.newTireRotation TO tires.set_setTireRotation
ROUTE RaceControl.newWheelSpin TO tires.set_setWheelSpin
ROUTE RaceControl.cam1Out TO cam1.set_bind
ROUTE RaceControl.cam2Out TO cam2.set_bind
ROUTE RaceControl.cam3Out TO cam3.set_bind
ROUTE RaceControl.cam4Out TO cam4.set_bind
ROUTE RaceControl.cam5Out TO cam5.set_bind
ROUTE RaceControl.cartex TO carbody.set_cartexture

Background {
  backUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
  bottomUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
  frontUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
  leftUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
  rightUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
  skyColor [ 0.0 0.0 0.0
 ]
  topUrl [ "clouds.jpg"
"http://home.attbi.com/~cnadams/race/clouds.jpg"
 ]
}

